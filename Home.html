<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floppy's Portfolio</title>
    <link rel="stylesheet" href="./Home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="theme-toggle-container">
        <button id="theme-toggle" aria-label="Toggle dark mode">
            <div class="toggle-track">
                <div class="toggle-moon">üåô</div>
                <div class="toggle-sun">‚òÄÔ∏è</div>
                <div class="toggle-thumb"></div>
            </div>
        </button>
    </div>
    <div class="container">
        <div class="main-card">
            <div class="intro-content">
                <h1>Hi, I'm Floppy!</h1>
                <h2 class="paragraph">I am <span id="role"></span></h2> 
                <script>
                    const roles = ["a Full Stack Developer", "a Mobile Developer", "an ML/DL Student"];
                    let roleIndex = 0;
                    let charIndex = 0;
                    const typingSpeed = 50;
                    const pauseBetweenWords = 1000;
                    const typedText = document.getElementById("role");

                    function type() {
                    if (charIndex < roles[roleIndex].length) {
                        typedText.textContent += roles[roleIndex].charAt(charIndex);
                        charIndex++;
                        setTimeout(type, typingSpeed);
                    } else {
                        setTimeout(erase, pauseBetweenWords);
                    }
                    }

                    function erase() {
                    if (charIndex > 0) {
                        typedText.textContent = roles[roleIndex].substring(0, charIndex - 1);
                        charIndex--;
                        setTimeout(erase, typingSpeed / 2);
                    } else {
                        roleIndex = (roleIndex + 1) % roles.length;
                        setTimeout(type, typingSpeed);
                    }
                    }

                    type();
                </script>
                <p class="paragraph">I'm a Software Developer who loves to create innovative and useful applications</p>
                <p>I'm a junior studying CS at Brown University</p>
                <p>Incoming SWE @Duolingo</p>
                
                <!-- icon navigation -->
                <div class="icon-nav">
                    <a href="/portfolio/projects" class="icon-link">
                        <div class="icon-box">
                            <img src="images/folder_icon.png" alt="Projects icon">
                        </div>
                        <span>projects</span>
                    </a>
                    <a href="/experience" class="icon-link">
                        <div class="icon-box">
                            <img src="images/brief_icon.png" alt="Experience icon">
                        </div>
                        <span>experience</span>
                    </a>
                    <a href="images/resume.pdf" class="icon-link" download>
                        <div class="icon-box">
                            <img src="images/resume_icon.png" alt="Resume icon">
                        </div>
                        <span>resume</span>
                    </a>
                    <a href="/links" class="icon-link">
                        <div class="icon-box">
                            <img src="images/link_icon.png" alt="Links icon">
                        </div>
                        <span>links</span>
                    </a>
                </div>
            </div>
            <div class="avatar">
                <img src="images/my_doll.png" alt="Floppy avatar">
            </div>
        </div>

        <!-- Grid layout for info cards -->
        <div class="grid-layout">
            <!-- Map Card --> 
            <div class="map-card">
                <div class="map-container">
                    <div id="mapbox-map" class="map-image"></div>

                </div>
                <p id="distance-text" class="map-text">Calculating your distance...</p>
                <p class="credit-text">Credits to <a href="https://www.joshwcomeau.com/">Josh Comeau</a> for the idea!</p>
                <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

            </div>

            <div class="card skills-card">
                <div class="skills-section">
                    <h2>Skills ‚òÜ</h2>
                    <div class="skills-grid">
                        <div class="skills-column">
                            <h3>Languages</h3>
                            <ul>
                                <li>Python</li>
                                <li>JavaScript/TypeScript</li>
                                <li>SWIFT</li>
                                <li>C#/C++</li>
                                <li>JAVA</li>
                            </ul>
                        </div>
                        <div class="skills-column">
                            <h3>Frameworks & Libraries</h3>
                            <ul>
                                <li>React</li>
                                <li>NumPy</li>
                                <li>TensorFlow, PyTorch, Keras</li>
                                <li>Pandas, Scikit-learn</li>
                                <li>Matplotlib, Seaborn</li>
                            </ul>
                        </div>
                        <div class="skills-column">
                            <h3>Tools</h3>
                            <ul>
                                <li>Git/GitHub</li>
                                <li>Figma</li>
                                <li>VS Code, XCode, IntelliJ</li>
                                <li>Google Colab</li>
                                <li>Postman</li>
                                <li>Jira, Slack, Notion</li>
                            </ul>
                        </div>
                    </div>
                </div>    
            </div>    

                <!-- Name Card -->
                <!-- <div class="card name-card">
                    <p>My name is Florencia, but Floppy <span>(yes, like Floppy Disks)</span> is a common nickname back home!</p>
                </div> -->
                
                <!-- Interests Card -->
                <div class="card learning-card">
                    <h3>Personal interests</h3>
                    ¬∑ ¬∑ ‚îÄ ¬∑ñ•∏¬∑ ‚îÄ ¬∑ ¬∑
                    <ul>
                        <p>Dancing & Choreographing</p>
                        <p>Language Learning</p>
                        <p>Chess ‚ôî‚ôï‚ôñ‚ôó</p>
                    </ul>    
                </div>

                <!-- Learning Card -->
                <div class="card learning-card">
                    <h3>Currently learning:</h3>
                    ¬∑¬∑¬∑‚Äî‚Äì‚Äî‚öú‚Äî‚Äì‚Äî¬∑¬∑¬∑
                    <ul>
                        <p>IOS Development</p>
                        <p>DL/ML</p>
                        <p>German</p>
                    </ul>
                </div>    
            
            <!-- Current Projects Card -->
            <div class="card learning-card">
                <h3>Currently working on:</h3>
                ‚îÄ‚îÄ‚îÄ‚îÄ‡≠®‡ßé‚îÄ‚îÄ‚îÄ‚îÄ
                <ul>
                    <p>Berlin Entdecken Mobile App ‚Üó</p>
                    <p>Implementing a Transformer from the Attention Is All You Need paper ‚Üó</p>
                </ul>
            </div>
            
            <!-- Fun Facts Card -->
            <div class="card learning-card">
                <h3>Fun facts ‚Äß‚ÇäÀö‚ú©</h3>
                <ul>
                    <p>I did high school for 2 years in Japan but I don't speak Japanese.</p>
                    <p>I can speak/understand a bit of Guaran√≠ (an official indigeneous language in Paraguay)</p>
                </ul>
            </div>
            <!-- Obsession Card -->
            <div class="card learning-card">
                <h3>My current obsession(s) üéß‚äπ‚ô°</h3>
                <div class="spotify-embed">
                    <iframe 
                    style="border-radius:12px" 
                    src="https://open.spotify.com/embed/track/7Fr2Q6q3rAxFUcMkuvVrXO?utm_source=generator" 
                    width="100%" 
                    height="152" 
                    frameBorder="0" 
                    allowfullscreen="" 
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                    loading="lazy">
                    </iframe>
                </div>
            </div>
            <!-- Languages Card -->
            <div class="card learning-card">
                <h3>I can speak these languages ìÖÜ</h3>
                <ul>
                    <p>Spanish (native)</p>
                    <p>English (C2)</p>
                    <p>Portuguese (C1)</p>
                    <p>Korean (B2)</p>
                    <p>German (A2)</p>
                </ul>
            </div>
        </div>

        <script>
            // Dark mode toggle functionality
            const themeToggle = document.getElementById('theme-toggle');
            const htmlElement = document.documentElement;
            
            // Check for saved theme preference or use device preference
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // Set initial theme
            if (savedTheme) {
                htmlElement.setAttribute('data-theme', savedTheme);
            } else if (prefersDark) {
                htmlElement.setAttribute('data-theme', 'dark');
            }
            
            // Update toggle position
            updateTogglePosition();
            
            // Toggle theme when button is clicked
            themeToggle.addEventListener('click', () => {
                const currentTheme = htmlElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                
                htmlElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                
                updateTogglePosition();
            });
            
            function updateTogglePosition() {
                const currentTheme = htmlElement.getAttribute('data-theme');
                const toggleThumb = document.querySelector('.toggle-thumb');
                
                if (currentTheme === 'dark') {
                    toggleThumb.style.transform = 'translateX(28px)';
                } else {
                    toggleThumb.style.transform = 'translateX(0)';
                }
            }
        </script>
        
    </div>
    <script>
        const yourCoords = [-58.4438, -25.2637]; // Asunci√≥n, Paraguay
    
        fetch('https://ipapi.co/json/')
        .then(res => res.json())
        .then(data => {
            const userCoords = [data.longitude, data.latitude];
    
            // Distance calculation (correct variable used)
            const from = turf.point(yourCoords);
            const to = turf.point(userCoords);
            const distance = turf.distance(from, to, { units: 'kilometers' }).toFixed(2);
    
            document.getElementById('distance-text').innerHTML =
              `I‚Äôm from Asunci√≥n, Paraguay, roughly <strong>${distance}km</strong> away from your current IP Address.`;
    
            // Call the map with proper coords
            setupMap(userCoords);
        })
        .catch(err => {
            document.getElementById('distance-text').textContent =
              "Couldn't calculate your distance üò¢";
            console.error(err);
        });
    </script>
    
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiZmRvdmFsIiwiYSI6ImNtYTNlOW5yNzA2ZDEyd284ZTY2NnlqZWMifQ.aSgBaXEpQzn5AjDonCR_sQ';

    function setupMap(userCoords) {
    const map = new mapboxgl.Map({
        container: 'mapbox-map',
        style: 'mapbox://styles/mapbox/streets-v12',
        center: userCoords,
        zoom: 2,
    });

    const bounds = new mapboxgl.LngLatBounds();
    bounds.extend(yourCoords);
    bounds.extend(userCoords);

    map.fitBounds(bounds, {
    padding: 10,
    duration: 1500,
    maxZoom: 5
    });

    // Custom marker in Paraguay
    const el = document.createElement('div');
    el.className = 'custom-marker';
    el.innerHTML = `<img src="images/doll_map.png" alt="Floppy in Paraguay" />`;

    new mapboxgl.Marker(el)
        .setLngLat(yourCoords)
        .setPopup(new mapboxgl.Popup().setText("Me in Paraguay üáµüáæ"))
        .addTo(map);

    // User marker
    new mapboxgl.Marker({ color: '#3b82f6' })
        .setLngLat(userCoords)
        .setPopup(new mapboxgl.Popup().setText("You (via IP)"))
        .addTo(map);

    // Add animated line
    map.on('load', () => {
        map.addSource('line', {
        type: 'geojson',
        data: {
            type: 'Feature',
            geometry: {
            type: 'LineString',
            coordinates: [userCoords, yourCoords]
            }
        }
        });

        map.addLayer({
        id: 'line-animation',
        type: 'line',
        source: 'line',
        paint: {
            'line-color': '#6366f1',
            'line-width': 4,
            'line-dasharray': [0.5, 2],
        }
        });

        function animateLine() {
        if (!map.getLayer('line-animation')) {
            return;
        }

        dashOffset += 0.1;
        map.setPaintProperty('line-animation', 'line-dasharray', dashOffset);
        requestAnimationFrame(animateLine);
        }
    });
    }


    </script>
    <footer class="footer">
        <div class="footer-content">
          <div class="footer-info">
            <p>¬© <span id="footer-year"></span> | Florencia Doval</p>
          </div>
          <div class="footer-links">
            <a
              href="https://github.com/floppydoval"
              target="_blank"
              rel="noopener noreferrer"
              class="social-icon"
            >
              <i class="fab fa-github icon"></i>
              <span class="icon-text"></span>
            </a>
            <a
              href="https://www.linkedin.com/in/florenciadoval/"
              target="_blank"
              rel="noopener noreferrer"
              class="social-icon"
            >
              <i class="fab fa-linkedin icon"></i>
              <span class="icon-text"></span>
            </a>
          </div>
        </div>
      </footer>
      <script>
        document.getElementById('footer-year').textContent = new Date().getFullYear();
      </script>
      
        
</body>
</html>